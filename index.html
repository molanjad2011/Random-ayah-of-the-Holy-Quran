<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚Ø±Ø¢Ù† Ú©Ø±ÛŒÙ…</title>
    <link rel="icon" href="https://avatars.githubusercontent.com/molanjad2011" type="image/png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<button id="theme-toggle">ğŸŒ™</button>

    <h1>Ù‚Ø±Ø¢Ù† Ú©Ø±ÛŒÙ…</h1>

    <div id="ayah-container">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>

    <div id="button-container">
        <button id="next-btn">Ø¢ÛŒÙ‡ Ø¨Ø¹Ø¯ÛŒ</button>
        <button id="favorite-btn">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</button>
        <button id="share-btn">Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ</button>
    </div>

    <h2>Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§:</h2>
    <div id="favorites"></div>
    <div id="clock"></div>

    <script>
        const EDITION = "quran-simple";
        let displayedAyahs = [];
        let favorites = [];
        let currentAyah = null;
function updateClock() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2,'0');
    const minutes = String(now.getMinutes()).padStart(2,'0');
    const seconds = String(now.getSeconds()).padStart(2,'0');

    document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;
}

// Update every second
setInterval(updateClock, 1000);
updateClock(); // initial call

        const suraVerses = {
            1: 7, 2: 286, 3: 200, 4: 176, 5: 120, 6: 165, 7: 206,
            8: 75, 9: 129, 10: 109, 11: 123, 12: 111, 13: 43, 14: 52,
            15: 99, 16: 128, 17: 111, 18: 110, 19: 98, 20: 135, 21: 112,
            22: 78, 23: 118, 24: 64, 25: 77, 26: 227, 27: 93, 28: 88,
            29: 69, 30: 60, 31: 34, 32: 30, 33: 73, 34: 54, 35: 45,
            36: 83, 37: 182, 38: 88, 39: 75, 40: 85, 41: 54, 42: 53,
            43: 89, 44: 59, 45: 37, 46: 35, 47: 38, 48: 29, 49: 18,
            50: 45, 51: 60, 52: 49, 53: 62, 54: 55, 55: 78, 56: 96,
            57: 29, 58: 22, 59: 24, 60: 13, 61: 14, 62: 11, 63: 11,
            64: 18, 65: 12, 66: 12, 67: 30, 68: 52, 69: 52, 70: 44,
            71: 28, 72: 28, 73: 20, 74: 56, 75: 40, 76: 31, 77: 50,
            78: 40, 79: 46, 80: 42, 81: 29, 82: 19, 83: 36, 84: 25,
            85: 22, 86: 17, 87: 19, 88: 26, 89: 30, 90: 20, 91: 15,
            92: 21, 93: 11, 94: 8, 95: 8, 96: 19, 97: 5, 98: 8, 99: 8,
            100: 11, 101: 11, 102: 8, 103: 3, 104: 9, 105: 5, 106: 4,
            107: 7, 108: 3, 109: 6, 110: 3, 111: 5, 112: 4, 113: 5, 114: 6
        };

        const ayahContainer = document.getElementById("ayah-container");
        const nextBtn = document.getElementById("next-btn");
        const favoriteBtn = document.getElementById("favorite-btn");
        const shareBtn = document.getElementById("share-btn");
const themeBtn = document.getElementById('theme-toggle');

themeBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');

    // Optional: change button icon
    if(document.body.classList.contains('dark-mode')) {
        themeBtn.textContent = 'â˜€ï¸'; // light icon
    } else {
        themeBtn.textContent = 'ğŸŒ™'; // dark icon
    }
});

        async function getRandomAyah() {
            const suraKeys = Object.keys(suraVerses);

            while (true) {
                const sura = suraKeys[Math.floor(Math.random() * suraKeys.length)];
                const ayahNum = Math.floor(Math.random() * suraVerses[sura]) + 1;
                const key = `${sura}:${ayahNum}`;

                if (displayedAyahs.includes(key)) continue;

                const url = `https://api.alquran.cloud/v1/ayah/${sura}:${ayahNum}/${EDITION}`;

                try {
                    const response = await fetch(url);
                    const data = await response.json();
                    const sajda = data.data?.sajda?.obligatory || false;

                    if (sajda) continue;

                    displayedAyahs.push(key);
                    currentAyah = {
                        text: data.data.text,
                        surah: data.data.surah.name,
                        number: ayahNum
                    };

                    return `${currentAyah.text}\n\nØ³ÙˆØ±Ù‡: ${currentAyah.surah}ØŒ Ø¢ÛŒÙ‡: ${ayahNum}`;
                } catch (err) {
                    return `Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ: ${err}`;
                }
            }
        }

        async function loadAyah() {
            ayahContainer.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...";
            ayahContainer.textContent = await getRandomAyah();
        }

        function addToFavorites() {
            if (!currentAyah) return;

            const favKey = `${currentAyah.surah}:${currentAyah.number}`;
            if (!favorites.includes(favKey)) {
                favorites.push(`${favKey} - ${currentAyah.text}`);
                updateFavorites();
            }
        }

        function updateFavorites() {
            const container = document.getElementById('favorites');
            container.innerHTML = favorites.map(f => `<p>${f}</p>`).join('');
        }

        function shareAyah() {
            if (!currentAyah) return alert("Ø¢ÛŒÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª!");

            const textToShare = `${currentAyah.text}\n\nØ³ÙˆØ±Ù‡: ${currentAyah.surah}ØŒ Ø¢ÛŒÙ‡: ${currentAyah.number}`;
            navigator.clipboard.writeText(textToShare)
                .then(() => alert("Ø¢ÛŒÙ‡ Ú©Ù¾ÛŒ Ø´Ø¯! Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯."))
                .catch(err => alert("Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ø¢ÛŒÙ‡ Ø±Ø® Ø¯Ø§Ø¯: " + err));
        }

        nextBtn.addEventListener("click", loadAyah);
        favoriteBtn.addEventListener("click", addToFavorites);
        shareBtn.addEventListener("click", shareAyah);

        // Load the first Ayah on page load
        loadAyah();
    </script>

</body>
</html>
